# -*- recursive cte. Be careful! *-*
# name: cte recursive
# key: cter
# expand-env: ((yas-indent-line 'fixed) (yas-wrap-around-region 'nil))
# --
with ${1:CTE} as (
    select t.${6:/*cols*/},$0
    t.$3, t.$5, 0 as depth
    from ${2:Tab} t
    where t.${3:ParentID} ${4:is null}

    union all

    select tt.$6,
    tt.$3, tt.$5, depth + 1
    from $2 tt
    inner join $1 cte on cte.${5:ID}=tt.$3
)
select * from $1